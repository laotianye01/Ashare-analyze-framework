"""check table consistency

Revision ID: e2e34b3d5a1d
Revises: 
Create Date: 2025-06-09 01:45:37.098096

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
import pgvector


# revision identifiers, used by Alembic.
revision: str = 'e2e34b3d5a1d'
down_revision: Union[str, None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('ashare',
    sa.Column('symbol', sa.String(length=20), nullable=False),
    sa.Column('name', sa.String(length=50), nullable=True),
    sa.Column('price', sa.Float(), nullable=True),
    sa.Column('change_percent', sa.Float(), nullable=True),
    sa.Column('change_amount', sa.Float(), nullable=True),
    sa.Column('volume', sa.Float(), nullable=True),
    sa.Column('amount', sa.Float(), nullable=True),
    sa.Column('amplitude', sa.Float(), nullable=True),
    sa.Column('high', sa.Float(), nullable=True),
    sa.Column('low', sa.Float(), nullable=True),
    sa.Column('open', sa.Float(), nullable=True),
    sa.Column('close', sa.Float(), nullable=True),
    sa.Column('previous_close', sa.Float(), nullable=True),
    sa.Column('volume_ratio', sa.Float(), nullable=True),
    sa.Column('turnover', sa.Float(), nullable=True),
    sa.Column('pe_dynamic', sa.Float(), nullable=True),
    sa.Column('pb_ratio', sa.Float(), nullable=True),
    sa.Column('total_value', sa.Float(), nullable=True),
    sa.Column('circulating_value', sa.Float(), nullable=True),
    sa.Column('speed', sa.Float(), nullable=True),
    sa.Column('change_5min', sa.Float(), nullable=True),
    sa.Column('change_60d', sa.Float(), nullable=True),
    sa.Column('change_ytd', sa.Float(), nullable=True),
    sa.Column('update_time', sa.TIMESTAMP(), nullable=False),
    sa.PrimaryKeyConstraint('symbol', 'update_time', name='realtime_quote_pk')
    )
    op.create_table('finance_statements',
    sa.Column('REPORT_DATE', sa.TIMESTAMP(), nullable=False),
    sa.Column('SECURITY_CODE', sa.String(length=20), nullable=False),
    sa.Column('ORG_CODE', sa.String(length=20), nullable=True),
    sa.Column('ORG_TYPE', sa.String(length=20), nullable=True),
    sa.Column('REPORT_TYPE', sa.String(length=20), nullable=True),
    sa.Column('MONETARYFUNDS', sa.Float(), nullable=True),
    sa.Column('TRADE_FINASSET_NOTFVTPL', sa.Float(), nullable=True),
    sa.Column('DERIVE_FINASSET', sa.Float(), nullable=True),
    sa.Column('NOTE_ACCOUNTS_RECE', sa.Float(), nullable=True),
    sa.Column('ACCOUNTS_RECE', sa.Float(), nullable=True),
    sa.Column('NOTE_RECE', sa.Float(), nullable=True),
    sa.Column('FINANCE_RECE', sa.Float(), nullable=True),
    sa.Column('PREPAYMENT', sa.Float(), nullable=True),
    sa.Column('TOTAL_OTHER_RECE', sa.Float(), nullable=True),
    sa.Column('INTEREST_RECE', sa.Float(), nullable=True),
    sa.Column('INVENTORY', sa.Float(), nullable=True),
    sa.Column('CONTRACT_ASSET', sa.Float(), nullable=True),
    sa.Column('AVAILABLE_SALE_FINASSET', sa.Float(), nullable=True),
    sa.Column('NONCURRENT_ASSET_1YEAR', sa.Float(), nullable=True),
    sa.Column('OTHER_CURRENT_ASSET', sa.Float(), nullable=True),
    sa.Column('CURRENT_ASSET_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_CURRENT_ASSETS', sa.Float(), nullable=True),
    sa.Column('CREDITOR_INVEST', sa.Float(), nullable=True),
    sa.Column('LONG_RECE', sa.Float(), nullable=True),
    sa.Column('LONG_EQUITY_INVEST', sa.Float(), nullable=True),
    sa.Column('OTHER_EQUITY_INVEST', sa.Float(), nullable=True),
    sa.Column('OTHER_NONCURRENT_FINASSET', sa.Float(), nullable=True),
    sa.Column('INVEST_REALESTATE', sa.Float(), nullable=True),
    sa.Column('FIXED_ASSET', sa.Float(), nullable=True),
    sa.Column('CIP', sa.Float(), nullable=True),
    sa.Column('USERIGHT_ASSET', sa.Float(), nullable=True),
    sa.Column('OIL_GAS_ASSET', sa.Float(), nullable=True),
    sa.Column('INTANGIBLE_ASSET', sa.Float(), nullable=True),
    sa.Column('DEVELOP_EXPENSE', sa.Float(), nullable=True),
    sa.Column('LONG_PREPAID_EXPENSE', sa.Float(), nullable=True),
    sa.Column('GOODWILL', sa.Float(), nullable=True),
    sa.Column('DEFER_TAX_ASSET', sa.Float(), nullable=True),
    sa.Column('OTHER_NONCURRENT_ASSET', sa.Float(), nullable=True),
    sa.Column('NONCURRENT_ASSET_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_NONCURRENT_ASSETS', sa.Float(), nullable=True),
    sa.Column('TOTAL_ASSETS', sa.Float(), nullable=True),
    sa.Column('FVTPL_FINLIAB', sa.Float(), nullable=True),
    sa.Column('SHORT_LOAN', sa.Float(), nullable=True),
    sa.Column('DERIVE_FINLIAB', sa.Float(), nullable=True),
    sa.Column('ACCOUNTS_PAYABLE', sa.Float(), nullable=True),
    sa.Column('NOTE_ACCOUNTS_PAYABLE', sa.Float(), nullable=True),
    sa.Column('NOTE_PAYABLE', sa.Float(), nullable=True),
    sa.Column('DIVIDEND_PAYABLE', sa.Float(), nullable=True),
    sa.Column('ADVANCE_RECEIVABLES', sa.Float(), nullable=True),
    sa.Column('CONTRACT_LIAB', sa.Float(), nullable=True),
    sa.Column('STAFF_SALARY_PAYABLE', sa.Float(), nullable=True),
    sa.Column('TAX_PAYABLE', sa.Float(), nullable=True),
    sa.Column('TOTAL_OTHER_PAYABLE', sa.Float(), nullable=True),
    sa.Column('INTEREST_PAYABLE', sa.Float(), nullable=True),
    sa.Column('PREDICT_CURRENT_LIAB', sa.Float(), nullable=True),
    sa.Column('SHORT_BOND_PAYABLE', sa.Float(), nullable=True),
    sa.Column('OTHER_CURRENT_LIAB', sa.Float(), nullable=True),
    sa.Column('NONCURRENT_LIAB_1YEAR', sa.Float(), nullable=True),
    sa.Column('CURRENT_LIAB_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_CURRENT_LIAB', sa.Float(), nullable=True),
    sa.Column('LONG_LOAN', sa.Float(), nullable=True),
    sa.Column('BOND_PAYABLE', sa.Float(), nullable=True),
    sa.Column('LEASE_LIAB', sa.Float(), nullable=True),
    sa.Column('LONG_PAYABLE', sa.Float(), nullable=True),
    sa.Column('LONG_STAFFSALARY_PAYABLE', sa.Float(), nullable=True),
    sa.Column('DEFER_INCOME', sa.Float(), nullable=True),
    sa.Column('DEFER_TAX_LIAB', sa.Float(), nullable=True),
    sa.Column('OTHER_NONCURRENT_LIAB', sa.Float(), nullable=True),
    sa.Column('NONCURRENT_LIAB_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_NONCURRENT_LIAB', sa.Float(), nullable=True),
    sa.Column('TOTAL_LIABILITIES', sa.Float(), nullable=True),
    sa.Column('SHARE_CAPITAL', sa.Float(), nullable=True),
    sa.Column('CAPITAL_RESERVE', sa.Float(), nullable=True),
    sa.Column('TREASURY_SHARES', sa.Float(), nullable=True),
    sa.Column('OTHER_EQUITY_TOOL', sa.Float(), nullable=True),
    sa.Column('OTHER_COMPRE_INCOME', sa.Float(), nullable=True),
    sa.Column('SPECIAL_RESERVE', sa.Float(), nullable=True),
    sa.Column('SURPLUS_RESERVE', sa.Float(), nullable=True),
    sa.Column('UNASSIGN_RPOFIT', sa.Float(), nullable=True),
    sa.Column('TOTAL_PARENT_EQUITY', sa.Float(), nullable=True),
    sa.Column('MINORITY_EQUITY', sa.Float(), nullable=True),
    sa.Column('TOTAL_EQUITY', sa.Float(), nullable=True),
    sa.Column('TOTAL_LIAB_EQUITY', sa.Float(), nullable=True),
    sa.Column('OPERATE_INCOME', sa.Float(), nullable=True),
    sa.Column('INTEREST_INCOME', sa.Float(), nullable=True),
    sa.Column('FEE_COMMISSION_INCOME', sa.Float(), nullable=True),
    sa.Column('FE_INTEREST_INCOME', sa.Float(), nullable=True),
    sa.Column('OTHER_INCOME', sa.Float(), nullable=True),
    sa.Column('FAIRVALUE_CHANGE_INCOME', sa.Float(), nullable=True),
    sa.Column('INVEST_INCOME', sa.Float(), nullable=True),
    sa.Column('INVEST_JOINT_INCOME', sa.Float(), nullable=True),
    sa.Column('ASSET_DISPOSAL_INCOME', sa.Float(), nullable=True),
    sa.Column('NONBUSINESS_INCOME', sa.Float(), nullable=True),
    sa.Column('TOTAL_OPERATE_INCOME', sa.Float(), nullable=True),
    sa.Column('OPERATE_COST', sa.Float(), nullable=True),
    sa.Column('INTEREST_EXPENSE', sa.Float(), nullable=True),
    sa.Column('FEE_COMMISSION_EXPENSE', sa.Float(), nullable=True),
    sa.Column('RESEARCH_EXPENSE', sa.Float(), nullable=True),
    sa.Column('OPERATE_TAX_ADD', sa.Float(), nullable=True),
    sa.Column('SALE_EXPENSE', sa.Float(), nullable=True),
    sa.Column('MANAGE_EXPENSE', sa.Float(), nullable=True),
    sa.Column('FINANCE_EXPENSE', sa.Float(), nullable=True),
    sa.Column('ASSET_IMPAIRMENT_INCOME', sa.Float(), nullable=True),
    sa.Column('CREDIT_IMPAIRMENT_INCOME', sa.Float(), nullable=True),
    sa.Column('NONBUSINESS_EXPENSE', sa.Float(), nullable=True),
    sa.Column('FE_INTEREST_EXPENSE', sa.Float(), nullable=True),
    sa.Column('TOTAL_OPERATE_COST', sa.Float(), nullable=True),
    sa.Column('OPERATE_PROFIT', sa.Float(), nullable=True),
    sa.Column('TOTAL_PROFIT', sa.Float(), nullable=True),
    sa.Column('INCOME_TAX', sa.Float(), nullable=True),
    sa.Column('NETPROFIT', sa.Float(), nullable=True),
    sa.Column('CONTINUED_NETPROFIT', sa.Float(), nullable=True),
    sa.Column('PARENT_NETPROFIT', sa.Float(), nullable=True),
    sa.Column('MINORITY_INTEREST', sa.Float(), nullable=True),
    sa.Column('DEDUCT_PARENT_NETPROFIT', sa.Float(), nullable=True),
    sa.Column('BASIC_EPS', sa.Float(), nullable=True),
    sa.Column('DILUTED_EPS', sa.Float(), nullable=True),
    sa.Column('PARENT_OCI', sa.Float(), nullable=True),
    sa.Column('MINORITY_OCI', sa.Float(), nullable=True),
    sa.Column('TOTAL_COMPRE_INCOME', sa.Float(), nullable=True),
    sa.Column('PARENT_TCI', sa.Float(), nullable=True),
    sa.Column('MINORITY_TCI', sa.Float(), nullable=True),
    sa.Column('SALES_SERVICES', sa.Float(), nullable=True),
    sa.Column('RECEIVE_TAX_REFUND', sa.Float(), nullable=True),
    sa.Column('RECEIVE_OTHER_OPERATE', sa.Float(), nullable=True),
    sa.Column('TOTAL_OPERATE_INFLOW', sa.Float(), nullable=True),
    sa.Column('BUY_SERVICES', sa.Float(), nullable=True),
    sa.Column('PAY_STAFF_CASH', sa.Float(), nullable=True),
    sa.Column('PAY_ALL_TAX', sa.Float(), nullable=True),
    sa.Column('PAY_OTHER_OPERATE', sa.Float(), nullable=True),
    sa.Column('TOTAL_OPERATE_OUTFLOW', sa.Float(), nullable=True),
    sa.Column('NETCASH_OPERATE', sa.Float(), nullable=True),
    sa.Column('WITHDRAW_INVEST', sa.Float(), nullable=True),
    sa.Column('RECEIVE_INVEST_INCOME', sa.Float(), nullable=True),
    sa.Column('DISPOSAL_LONG_ASSET', sa.Float(), nullable=True),
    sa.Column('DISPOSAL_SUBSIDIARY_OTHER', sa.Float(), nullable=True),
    sa.Column('RECEIVE_OTHER_INVEST', sa.Float(), nullable=True),
    sa.Column('TOTAL_INVEST_INFLOW', sa.Float(), nullable=True),
    sa.Column('CONSTRUCT_LONG_ASSET', sa.Float(), nullable=True),
    sa.Column('INVEST_PAY_CASH', sa.Float(), nullable=True),
    sa.Column('OBTAIN_SUBSIDIARY_OTHER', sa.Float(), nullable=True),
    sa.Column('INVEST_NETCASH_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_INVEST_OUTFLOW', sa.Float(), nullable=True),
    sa.Column('NETCASH_INVEST', sa.Float(), nullable=True),
    sa.Column('ACCEPT_INVEST_CASH', sa.Float(), nullable=True),
    sa.Column('SUBSIDIARY_ACCEPT_INVEST', sa.Float(), nullable=True),
    sa.Column('RECEIVE_LOAN_CASH', sa.Float(), nullable=True),
    sa.Column('FINANCE_NETCASH_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_FINANCE_INFLOW', sa.Float(), nullable=True),
    sa.Column('PAY_DEBT_CASH', sa.Float(), nullable=True),
    sa.Column('ASSIGN_DIVIDEND_PORFIT', sa.Float(), nullable=True),
    sa.Column('PAY_OTHER_FINANCE', sa.Float(), nullable=True),
    sa.Column('FINANCE_OUTFLOW_OTHER', sa.Float(), nullable=True),
    sa.Column('TOTAL_FINANCE_OUTFLOW', sa.Float(), nullable=True),
    sa.Column('NETCASH_FINANCE', sa.Float(), nullable=True),
    sa.Column('RATE_CHANGE_EFFECT', sa.Float(), nullable=True),
    sa.Column('CCE_ADD', sa.Float(), nullable=True),
    sa.Column('BEGIN_CCE', sa.Float(), nullable=True),
    sa.Column('END_CCE', sa.Float(), nullable=True),
    sa.Column('ASSET_IMPAIRMENT', sa.Float(), nullable=True),
    sa.Column('FA_IR_DEPR', sa.Float(), nullable=True),
    sa.Column('OILGAS_BIOLOGY_DEPR', sa.Float(), nullable=True),
    sa.Column('IA_AMORTIZE', sa.Float(), nullable=True),
    sa.Column('LPE_AMORTIZE', sa.Float(), nullable=True),
    sa.Column('DISPOSAL_LONGASSET_LOSS', sa.Float(), nullable=True),
    sa.Column('FIXED_ASSET_DISPOSAL', sa.Float(), nullable=True),
    sa.Column('FAIRVALUE_CHANGE_LOSS', sa.Float(), nullable=True),
    sa.Column('INVEST_LOSS', sa.Float(), nullable=True),
    sa.Column('DEFER_TAX', sa.Float(), nullable=True),
    sa.Column('DT_ASSET_REDUCE', sa.Float(), nullable=True),
    sa.Column('DT_LIAB_ADD', sa.Float(), nullable=True),
    sa.Column('INVENTORY_REDUCE', sa.Float(), nullable=True),
    sa.Column('OPERATE_RECE_REDUCE', sa.Float(), nullable=True),
    sa.Column('OPERATE_PAYABLE_ADD', sa.Float(), nullable=True),
    sa.Column('OPERATE_NETCASH_OTHERNOTE', sa.Float(), nullable=True),
    sa.Column('END_CASH', sa.Float(), nullable=True),
    sa.Column('BEGIN_CASH', sa.Float(), nullable=True),
    sa.Column('END_CASH_EQUIVALENTS', sa.Float(), nullable=True),
    sa.PrimaryKeyConstraint('SECURITY_CODE', 'REPORT_DATE', name='finance_statements_pk')
    )
    op.create_table('news',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('abstract', sa.String(length=50), nullable=True),
    sa.Column('content', sa.String(length=100), nullable=True),
    sa.Column('main_body', sa.String(length=100), nullable=True),
    sa.Column('update_time', sa.TIMESTAMP(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('sector',
    sa.Column('name', sa.String(length=50), nullable=False),
    sa.Column('code', sa.String(length=30), nullable=True),
    sa.Column('change_percent', sa.Float(), nullable=True),
    sa.Column('price', sa.Float(), nullable=True),
    sa.Column('volume', sa.Float(), nullable=True),
    sa.Column('update_time', sa.TIMESTAMP(), nullable=True),
    sa.PrimaryKeyConstraint('name')
    )
    op.create_table('sector_info',
    sa.Column('name', sa.String(length=30), nullable=False),
    sa.Column('code', sa.String(length=30), nullable=True),
    sa.Column('update_time', sa.TIMESTAMP(), nullable=True),
    sa.PrimaryKeyConstraint('name')
    )
    op.create_table('stock_info',
    sa.Column('symbol', sa.String(length=20), nullable=False),
    sa.Column('name', sa.String(length=50), nullable=True),
    sa.Column('area', sa.String(length=50), nullable=True),
    sa.Column('update_time', sa.TIMESTAMP(), nullable=True),
    sa.PrimaryKeyConstraint('symbol')
    )
    op.create_table('stock_news',
    sa.Column('symbol', sa.String(length=10), nullable=False),
    sa.Column('keyword', sa.String(length=50), nullable=True),
    sa.Column('title', sa.String(length=255), nullable=True),
    sa.Column('content', sa.Text(), nullable=True),
    sa.Column('source', sa.String(length=100), nullable=True),
    sa.Column('url', sa.String(length=255), nullable=True),
    sa.Column('timestamp', sa.TIMESTAMP(), nullable=False),
    sa.PrimaryKeyConstraint('symbol', 'timestamp', name='stock_news_pk')
    )
    op.create_table('sector_components',
    sa.Column('sector_name', sa.String(), nullable=False),
    sa.Column('stock_code', sa.String(), nullable=False),
    sa.ForeignKeyConstraint(['sector_name'], ['sector_info.name'], ondelete='CASCADE'),
    sa.ForeignKeyConstraint(['stock_code'], ['stock_info.symbol'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('sector_name', 'stock_code')
    )
    op.create_table('vector_record',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('stock_symbol', sa.String(length=20), nullable=False),
    sa.Column('embedding', pgvector.sqlalchemy.vector.VECTOR(), nullable=True),
    sa.Column('content', sa.Text(), nullable=True),
    sa.Column('params', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.TIMESTAMP(), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['stock_symbol'], ['stock_info.symbol'], ),
    sa.PrimaryKeyConstraint('id')
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('vector_record')
    op.drop_table('sector_components')
    op.drop_table('stock_news')
    op.drop_table('stock_info')
    op.drop_table('sector_info')
    op.drop_table('sector')
    op.drop_table('news')
    op.drop_table('finance_statements')
    op.drop_table('ashare')
    # ### end Alembic commands ###
